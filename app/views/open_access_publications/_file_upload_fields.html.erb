<div class="nested-fields file-upload-fields">
  <%= f.input :file_cache, as: :hidden %>
  <div class="file-group">
    <% if fname = f.object.file_identifier %>
      <div class="form-group file required file-display">
        <%= link_to fname, f.object.file_url, target: '_blank', class: 'form-control disabled' %>
      </div>
    <% else %>
      <%= f.label :file, 'Choose File', class: 'sr-only' %>
      <%= f.input :file, as: :file, input_html: { class: 'form-control file' } %>
    <% end %>

    <% if f.object.new_record? %>
      <%= link_to_remove_association f, title: 'Remove this file', class: 'btn btn-danger' do %>
        X
        <span class="sr-only">Remove this file</span>
      <% end %>
    <% end %>
  </div>
</div>
